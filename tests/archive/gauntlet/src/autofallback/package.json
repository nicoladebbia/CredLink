{
  "name": "c2-autofallback",
  "version": "1.0.0",
  "description": "Phase 6 - Optimizer Auto-Fallback: Real-time strip-risk detection and enforcement",
  "type": "commonjs",
  "main": "worker.js",
  "scripts": {
    "dev": "wrangler dev",
    "deploy": "wrangler deploy",
    "deploy:staging": "wrangler deploy --env staging",
    "deploy:production": "wrangler deploy --env production",
    "test": "vitest",
    "test:run": "vitest run",
    "test:coverage": "vitest run --coverage",
    "drill:flip": "tsx scripts/sandbox-drill.ts",
    "drill:restore": "tsx scripts/restore-test.ts",
    "drill:fp-test": "tsx scripts/false-positive-test.ts",
    "validate": "tsx scripts/validate-config.ts",
    "incident:query": "tsx scripts/query-incidents.ts",
    "break-glass:set": "tsx scripts/break-glass.ts set",
    "break-glass:clear": "tsx scripts/break-glass.ts clear",
    "metrics:export": "tsx scripts/export-metrics.ts",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {},
  "devDependencies": {
    "@types/node": "20.8.0",
    "@cloudflare/workers-types": "^4.20231025.0",
    "@vitest/coverage-v8": "0.34.6",
    "tsx": "4.1.4",
    "typescript": "5.2.2",
    "vitest": "0.34.6",
    "wrangler": "3.22.1"
  },
  "engines": {
    "node": ">=18.0.0"
  },
  "keywords": [
    "c2pa",
    "content-credentials",
    "auto-fallback",
    "cdn",
    "optimizer",
    "strip-risk",
    "cloudflare-workers",
    "durable-objects"
  ],
  "author": "C2 Concierge Team",
  "license": "MIT",
  "repository": {
    "type": "commonjs",
    "url": "https://github.com/nickiller04/credlink",
    "directory": "gauntlet/src/autofallback"
  },
  "bugs": {
    "url": "https://github.com/nickiller04/credlink/issues"
  },
  "homepage": "https://github.com/nickiller04/credlink/tree/main/gauntlet/src/autofallback",
  "vitest": {
    "environment": "miniflare",
    "environmentOptions": {
      "compatibilityDate": "2025-10-31",
      "compatibilityFlags": ["nodejs_compat"],
      "durableObjects": [
        {
          "className": "C2AutoFallbackDO",
          "scriptName": "worker"
        }
      ],
      "kvNamespaces": [
        "C2_BREAKGLASS",
        "C2_POLICY_CACHE"
      ],
      "r2Buckets": [
        "C2_INCIDENT_LOGS"
      ],
      "vars": {
        "REMOTE_ONLY_DEFAULT": "0",
        "WINDOW_SECS": "60",
        "RESTORE_HYSTERESIS_SECS": "600",
        "ROUTE_MIN_SAMPLES": "40",
        "SCORE_THRESHOLD": "100",
        "SCORE_RESTORE": "30",
        "BADGE_REQUIRED": "1",
        "MANIFEST_BASE": "https://manifests.example",
        "TENANT_ID": "test-tenant",
        "HMAC_SECRET": "test-hmac-secret",
        "ADMIN_TOKEN": "test-admin-token"
      }
    }
  }
}

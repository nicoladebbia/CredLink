# Phase 36 Billing Environment Configuration
# CRITICAL SECURITY: Use strong, unique secrets in production

# Server Configuration
NODE_ENV=development
HOST=0.0.0.0
PORT=3002
LOG_LEVEL=info
LOG_FORMAT=pretty

# Redis Configuration - CRITICAL: Use TLS in production
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your-strong-redis-password-with-special-chars-123!
REDIS_MAX_RETRIES=3
REDIS_TLS=false

# Stripe Configuration (REQUIRED) - CRITICAL: Use live keys in production
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_API_VERSION=2023-10-16

# Stripe Product IDs (configure in Stripe Dashboard)
STRIPE_STARTER_PRICE_ID=price_1...
STRIPE_PRO_PRICE_ID=price_1...
STRIPE_ENTERPRISE_PRICE_ID=price_1...

# Stripe Usage Meter IDs
STRIPE_SIGN_EVENTS_METER_ID=meter_1...
STRIPE_VERIFY_EVENTS_METER_ID=meter_1...
STRIPE_RFC3161_TIMESTAMPS_METER_ID=meter_1...

# Database Configuration - CRITICAL: Use SSL and strong credentials
DATABASE_URL=postgresql://user:strong-password@localhost:5432/c2pa_billing?sslmode=require
DATABASE_POOL_SIZE=10
DATABASE_TIMEOUT=30000

# Security Configuration - CRITICAL: Use 128+ character secrets with maximum entropy
JWT_SECRET=Your-Super-Secure-JWT-Secret-Key-128-Characters-Minimum-With-Uppercase-Lowercase-Numbers-And-Special-Characters!@#$%^&*()
API_KEY_SECRET=Your-Super-Secure-API-Key-Secret-64-Characters-Minimum-With-Uppercase-Lowercase-Numbers-And-Special-Characters!@#$%
SESSION_TIMEOUT=3600000
RATE_LIMIT_WINDOW=900000
MAX_REQUESTS_PER_WINDOW=100

# Trial Configuration
TRIAL_DURATION_DAYS=14
TRIAL_ASSET_CAP=200
TRIAL_CARD_REQUIRED=true

# C2PA Configuration
CAI_VERIFY_ENDPOINT=https://verify.contentauthenticity.org
MANIFEST_HOST_BASE_URL=https://manifests.c2pa.org
RFC3161_TSA_ENDPOINT=https://freetsa.org/tsr

# File Storage Configuration - CRITICAL: Use secure storage paths
ASSET_STORAGE_PATH=./assets
EXPORT_STORAGE_PATH=./exports
MAX_ASSET_SIZE=104857600
MANIFEST_RETENTION_DAYS=365

# Email Configuration (for dunning and onboarding) - CRITICAL: Use API keys, not passwords
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=your-sendgrid-api-key-secure
EMAIL_FROM=noreply@c2pa.org
EMAIL_SUPPORT=support@c2pa.org

# Compliance Configuration
COMPLIANCE_REPORT_SCHEDULE=0 0 1 * *
DATA_RETENTION_DAYS=2555
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555

# Feature Flags - CRITICAL: Disable debug features in production
ENABLE_STRIPE_RADAR=true
ENABLE_SMART_RETRIES=true
ENABLE_USAGE_METERING=true
ENABLE_RFC3161_TIMESTAMPS=false
ENABLE_CUSTOMER_PORTAL=true

# Monitoring Configuration
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30000

# CORS Configuration - CRITICAL: Restrict to specific domains in production
ALLOWED_ORIGINS=http://localhost:3000,https://app.c2pa.org
CORS_CREDENTIALS=true

# Webhook Configuration - CRITICAL: Use strong timeout values
WEBHOOK_TIMEOUT=30000
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=1000

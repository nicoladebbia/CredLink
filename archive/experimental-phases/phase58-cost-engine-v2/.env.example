# Phase 58 - Cost Engine v2 (FinOps) Configuration

# AWS Configuration
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here
AWS_CUR_BUCKET=your-cur-bucket
AWS_CUR_PREFIX=cur-data/
AWS_CUR_REPORT_NAME=hourly-cost-and-usage

# Cloudflare Configuration
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here
CLOUDFLARE_ACCOUNT_ID=your_account_id_here
CLOUDFLARE_ZONE_IDS=zone_id_1,zone_id_2
CLOUDFLARE_LOGPUSH_BUCKET=your-logpush-bucket
CLOUDFLARE_LOGPUSH_PREFIX=http-requests/

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=cost_engine
DB_USER=postgres
DB_PASSWORD=your_db_password_here
DB_SSL=false

# DuckDB Configuration (for local analysis)
DUCKDB_PATH=./data/cost_engine.duckdb

# Detection Configuration
ANOMALY_CONFIDENCE_THRESHOLD=0.8
ANOMALY_IMPACT_USD_DAY_THRESHOLD=50.0
ANOMALY_DURATION_HOURS_THRESHOLD=2
BASELINE_LOOKBACK_DAYS=30
EWMA_ALPHA=0.3

# Policy Engine Configuration
AUTO_ACTION_ENABLED=false
AUTO_ACTION_CONFIDENCE_THRESHOLD=0.85
AUTO_ACTION_IMPACT_THRESHOLD=100.0
APPROVAL_REQUIRED=true
COOLDOWN_HOURS=24
EVENT_MODE_TENANTS=

# Alert Configuration
ALERT_WEBHOOK_URL=https://your-webhook-url.com/alerts
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_TO=ops@example.com
ALERT_SNS_TOPIC_ARN=

# Dashboard Configuration
DASHBOARD_PORT=3000
DASHBOARD_HOST=0.0.0.0
DASHBOARD_AUTH_ENABLED=false
DASHBOARD_API_KEY=

# Pricing Configuration (USD, update periodically)
# Cloudflare Workers
WORKERS_PRICE_PER_REQUEST=0.00000015
WORKERS_PRICE_PER_CPU_MS=0.000002

# Cloudflare R2
R2_PRICE_PER_GB_MONTH=0.015
R2_PRICE_PER_CLASS_A_OP=0.0000045
R2_PRICE_PER_CLASS_B_OP=0.00000036
R2_EGRESS_PRICE=0.0

# AWS S3 (us-east-1)
S3_PRICE_PER_GB_MONTH=0.023
S3_EGRESS_PRICE_PER_GB=0.09

# TSA (RFC 3161 Timestamps)
TSA_PRICE_PER_TOKEN=0.001

# Logpush
LOGPUSH_PRICE_PER_GB=0.05

# Allocation Configuration
ALLOCATION_TAG_KEYS=tenant_id,environment,product,team
ALLOCATION_CONFIDENCE_MINIMUM=0.7
ALLOCATION_UNTAGGED_FALLBACK=shared

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/cost-engine.log

# Performance
INGEST_BATCH_SIZE=1000
INGEST_CONCURRENCY=5
DETECTION_INTERVAL_MINUTES=60
ALLOCATION_INTERVAL_MINUTES=30
